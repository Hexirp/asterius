steps:

  - key: "pandoc"
    label: "pandoc"
    command: |
      docker pull terrorjack/asterius:latest
      docker run \
        --env UID=$(id --user) \
        --env GID=$(id --group) \
        --rm \
        --volume $(pwd):/workspace \
        --workdir /workspace/pandoc \
        terrorjack/asterius:latest \
        /workspace/pandoc/build.sh
    artifact_paths:
      - "pandoc.tar"

  - key: "ormolu"
    label: "ormolu"
    command: |
      docker pull terrorjack/asterius:latest
      docker run \
        --env UID=$(id --user) \
        --env GID=$(id --group) \
        --rm \
        --volume $(pwd):/workspace \
        --workdir /workspace/ormolu \
        terrorjack/asterius:latest \
        /workspace/ormolu/build.sh
    artifact_paths:
      - "ormolu.tar"

  - key: "todomvc"
    label: "todomvc"
    command: |
      docker pull terrorjack/asterius:latest
      docker run \
        --env UID=$(id --user) \
        --env GID=$(id --group) \
        --rm \
        --volume $(pwd):/workspace \
        --workdir /workspace/todomvc \
        terrorjack/asterius:latest \
        /workspace/todomvc/build.sh
    artifact_paths:
      - "todomvc.tar"
